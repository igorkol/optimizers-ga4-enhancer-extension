(()=>{"use strict";var e={144:(e,t,r)=>{t.b6=t.Aq=void 0;const n=r(137),o=r(697),l=r(297),T=r(327),{type:s,element:A}=(0,T.getReportingTable)();t.Aq=()=>{if(A)try{const e=(0,o.removeCellPercentages)(A);(0,n.addCellPercentages)(A,s);!e&&l.TABLE_TYPE.CUSTOM_EXPLORATION}catch(e){}};t.b6=()=>{if(null!==A&&s!==l.TABLE_TYPE.STANDARD_REPORTING&&"undefined"!=typeof MutationObserver){new MutationObserver(((e,r)=>{for(const n of e)if("childList"===n.type){(0,t.Aq)(),r.disconnect(),setTimeout(t.b6,500);break}})).observe(A,{childList:!0,subtree:!0})}},(0,t.Aq)(),(0,t.b6)()},137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addCellPercentages=void 0;const n=r(459),o=r(643),l=r(297),T=chrome.storage?.local;t.addCellPercentages=async(e,t)=>{let r=0;const s=[],A=Array.from(e.querySelectorAll(t===l.TABLE_TYPE.STANDARD_REPORTING?l.STANDARD_REPORT_HEADERS:l.CUSTOM_REPORT_HEADERS)),_=Array.from(e.querySelectorAll(t===l.TABLE_TYPE.STANDARD_REPORTING?l.STANDARD_REPORT_ROWS:l.CUSTOM_REPORT_ROWS));if(0!==A.length){for(const[e,T]of A.entries()){const A=T.querySelectorAll(t===l.TABLE_TYPE.STANDARD_REPORTING?l.STANDARD_REPORT_SUMMARY_TOTALS:l.CUSTOM_REPORT_SUMMARY_TOTALS),{index:R,total:S}=(0,n.getTableHeaders)(A,e);s.push({index:R,total:S}),void 0!==R&&void 0!==S&&((0,o.getTableRowsAndInsertPercentagesToCells)(_,R,S,t),r++)}await T.set({optimizersStorage:s})}else{const e=await new Promise((e=>{T.get("optimizersStorage",(t=>{e(t.optimizersStorage)}))}));for(const{index:n,total:l}of e)(0,o.getTableRowsAndInsertPercentagesToCells)(_,n,l,t),r++}return r}},26:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupStringToNumber=void 0;t.cleanupStringToNumber=e=>Number(e.replace(/[,Â£$<>!-]/g,""))},297:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_REPORT_SUMMARY_TOTALS=t.CUSTOM_REPORT_HEADERS=t.CUSTOM_REPORT_ROWS=t.CUSTOM_EXPLORATION_TABLE=t.STANDARD_REPORT_SUMMARY_TOTALS=t.STANDARD_REPORT_HEADERS=t.STANDARD_REPORT_ROWS=t.STANDARD_REPORTING_TABLE=t.TABLE_TYPE=t.COLUMNS_FOR_PERCENTAGES=t.CLASS_NAME_ALL_EXTENSION_CHANGES=void 0,t.CLASS_NAME_ALL_EXTENSION_CHANGES="optimizers-extension",t.COLUMNS_FOR_PERCENTAGES="% of total",function(e){e.STANDARD_REPORTING="standard",e.CUSTOM_EXPLORATION="custom"}(r||(t.TABLE_TYPE=r={})),t.STANDARD_REPORTING_TABLE="ga-reporting-table",t.STANDARD_REPORT_ROWS="tbody tr",t.STANDARD_REPORT_HEADERS='thead tr[class*="summary-totals"] th',t.STANDARD_REPORT_SUMMARY_TOTALS='div[class*="summary-text"]',t.CUSTOM_EXPLORATION_TABLE="analysis-canvas",t.CUSTOM_REPORT_ROWS='svg g.cell:not([row-index="0"])',t.CUSTOM_REPORT_HEADERS='svg g.cell[row-index="0"]',t.CUSTOM_REPORT_SUMMARY_TOTALS='text[class*="percent-of-total"]'},327:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReportingTable=void 0;const n=r(297);t.getReportingTable=()=>{const e=window.document.querySelector(n.STANDARD_REPORTING_TABLE);if(e)return{type:n.TABLE_TYPE.STANDARD_REPORTING,element:e};const t=window.document.querySelector(n.CUSTOM_EXPLORATION_TABLE);return t?{type:n.TABLE_TYPE.CUSTOM_EXPLORATION,element:t}:null}},459:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTableHeaders=void 0;const n=r(26),o=r(297);t.getTableHeaders=(e,t)=>{let r,l;return e.forEach((e=>{if(e.innerHTML.includes(o.COLUMNS_FOR_PERCENTAGES)){const o=e.previousElementSibling.innerHTML,T=(0,n.cleanupStringToNumber)(o);r=t,l=T}})),{index:r,total:l}}},643:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetedCellOrSvgText=t.getTableRowsAndInsertPercentagesToCells=void 0;const n=r(26),o=r(610),l=r(297);t.getTableRowsAndInsertPercentagesToCells=(e,r,l,T)=>{e.forEach((e=>{const s=(0,t.getTargetedCellOrSvgText)(e,r,T);if(!s)return;const A=((0,n.cleanupStringToNumber)(s.innerHTML)/l*100).toFixed(2);(0,o.insertStringIntoCell)(s,A,T)}))};t.getTargetedCellOrSvgText=(e,t,r)=>r===l.TABLE_TYPE.STANDARD_REPORTING?e.children[t]:e.matches(`[column-index="${t}"]`)?e.querySelector("text"):null},610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.insertStringIntoCell=void 0;const n=r(297);t.insertStringIntoCell=(e,t,r)=>{if(r===n.TABLE_TYPE.STANDARD_REPORTING){const r=o(t);e.insertBefore(r,e.firstChild)}else{const r=l(e,t);e.insertAdjacentElement("afterend",r)}};const o=e=>{const t=document.createElement("span");return t.setAttribute("style","font-size:10px; font-style:italic"),t.setAttribute("class",n.CLASS_NAME_ALL_EXTENSION_CHANGES),t.innerText=`(${e}%)`,t},l=(e,t)=>{const r=e.getAttributeNS(null,"x"),o=e.getAttributeNS(null,"y");e.setAttributeNS(null,"dx","-30");const l=document.createElementNS("http://www.w3.org/2000/svg","text");return l.setAttributeNS(null,"x",r),l.setAttributeNS(null,"y",o),l.setAttributeNS(null,"style","font: 10px Roboto, sans-serif;"),l.setAttributeNS(null,"dx","13"),l.setAttributeNS(null,"dy","-5"),l.setAttributeNS(null,"class",`align-right ${n.CLASS_NAME_ALL_EXTENSION_CHANGES}`),l.textContent=`(${t}%)`,l}},697:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeCellPercentages=void 0;const n=r(297);t.removeCellPercentages=e=>{let t=0;return e.querySelectorAll(`.${n.CLASS_NAME_ALL_EXTENSION_CHANGES}`).forEach((e=>{e.remove(),t++})),t}}},t={};(function r(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports})(144)})();