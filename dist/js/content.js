(()=>{"use strict";var e={144:(e,t,r)=>{t.C8=t.b6=t.Aq=void 0;const n=r(137),T=r(697),o=r(297),l=r(327),{element:A}=(0,l.getReportingTable)();t.Aq=()=>{const{type:e,element:t}=(0,l.getReportingTable)();if(t)try{const r=(0,T.removeCellPercentages)(t);(0,n.addCellPercentages)(t,e);!r&&o.TABLE_TYPE.CUSTOM_EXPLORATION}catch(e){}};const s=new WeakMap;t.b6=()=>{const{type:e,element:r}=(0,l.getReportingTable)();if(null!==r&&e!==o.TABLE_TYPE.STANDARD_REPORTING&&!s.has(r)&&"undefined"!=typeof MutationObserver){const e=new MutationObserver(((e,n)=>{for(const n of e)if("childList"===n.type){(0,t.Aq)(),(0,t.C8)(r),setTimeout(t.b6,500);break}}));e.observe(r,{childList:!0,subtree:!0}),s.set(r,e)}};t.C8=e=>{const t=s.get(e);t&&(t.disconnect(),s.delete(e))},(0,t.C8)(A),(0,t.Aq)(),(0,t.b6)()},137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addCellPercentages=void 0;const n=r(86),T=r(643),o=r(297),l=chrome.storage?.local;t.addCellPercentages=async(e,t)=>{let r=0;const A=[],s=Array.from(e.querySelectorAll(t===o.TABLE_TYPE.STANDARD_REPORTING?o.STANDARD_REPORT_HEADER_NUMBERS:o.CUSTOM_REPORT_HEADERS)),_=Array.from(e.querySelectorAll(t===o.TABLE_TYPE.STANDARD_REPORTING?o.STANDARD_REPORT_ROWS:o.CUSTOM_REPORT_ROWS));if(0!==s.length){for(const[l,R]of s.entries()){let E=l;const S=R.querySelectorAll(t===o.TABLE_TYPE.STANDARD_REPORTING?o.STANDARD_REPORT_SUMMARY_TOTALS:o.CUSTOM_REPORT_SUMMARY_TOTALS);if(t===o.TABLE_TYPE.STANDARD_REPORTING){Array.from(e.querySelectorAll(o.STANDARD_REPORT_HEADER_TITLES)).length>s.length&&E++}const{index:i,total:a}=(0,n.getTableHeadersWithPercentages)(E,S);A.push({index:i,total:a}),void 0!==i&&void 0!==a&&((0,T.getTableRowsAndInsertPercentagesToCells)(_,i,a,t),r++)}await l.set({optimizersStorage:A})}else{const e=await new Promise((e=>{l.get("optimizersStorage",(t=>{e(t.optimizersStorage)}))}));for(const{index:n,total:o}of e)(0,T.getTableRowsAndInsertPercentagesToCells)(_,n,o,t),r++}return r}},26:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupStringToNumber=void 0;t.cleanupStringToNumber=e=>Number(e.replace(/[,Â£$<>!-]/g,""))},297:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_REPORT_SUMMARY_TOTALS=t.CUSTOM_REPORT_HEADERS=t.CUSTOM_REPORT_ROWS=t.CUSTOM_EXPLORATION_TABLE=t.STANDARD_REPORT_SUMMARY_TOTALS=t.STANDARD_REPORT_HEADER_TITLES=t.STANDARD_REPORT_HEADER_NUMBERS=t.STANDARD_REPORT_ROWS=t.STANDARD_REPORTING_TABLE=t.TABLE_TYPE=t.COLUMNS_FOR_PERCENTAGES=t.PATH_TO_CONTENT_SCRIPT=t.GOOGLE_ANALYTICS_URL=t.CLASS_NAME_ALL_EXTENSION_CHANGES=void 0,t.CLASS_NAME_ALL_EXTENSION_CHANGES="optimizers-extension",t.GOOGLE_ANALYTICS_URL="https://analytics.google.com/*",t.PATH_TO_CONTENT_SCRIPT="js/content.js",t.COLUMNS_FOR_PERCENTAGES="% of total",function(e){e.STANDARD_REPORTING="standard",e.CUSTOM_EXPLORATION="custom"}(r||(t.TABLE_TYPE=r={})),t.STANDARD_REPORTING_TABLE="ga-reporting-table",t.STANDARD_REPORT_ROWS="tbody tr",t.STANDARD_REPORT_HEADER_NUMBERS='thead tr[class*="summary-totals"] th',t.STANDARD_REPORT_HEADER_TITLES='thead tr[class*="table-header-row"] th',t.STANDARD_REPORT_SUMMARY_TOTALS='div[class*="summary-text"]',t.CUSTOM_EXPLORATION_TABLE="analysis-canvas",t.CUSTOM_REPORT_ROWS='svg g.cell:not([row-index="0"])',t.CUSTOM_REPORT_HEADERS='svg g.cell[row-index="0"]',t.CUSTOM_REPORT_SUMMARY_TOTALS='text[class*="percent-of-total"]'},327:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReportingTable=void 0;const n=r(297);t.getReportingTable=()=>{const e=window.document.querySelector(n.STANDARD_REPORTING_TABLE);if(e)return{type:n.TABLE_TYPE.STANDARD_REPORTING,element:e};const t=window.document.querySelector(n.CUSTOM_EXPLORATION_TABLE);return t?{type:n.TABLE_TYPE.CUSTOM_EXPLORATION,element:t}:null}},86:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTableHeadersWithPercentages=void 0;const n=r(26),T=r(297);t.getTableHeadersWithPercentages=(e,t)=>{let r,o;return t.forEach((t=>{if(t.innerHTML.includes(T.COLUMNS_FOR_PERCENTAGES)){const T=t.previousElementSibling.innerHTML,l=(0,n.cleanupStringToNumber)(T);r=e,o=l}})),{index:r,total:o}}},643:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetedCellOrSvgText=t.getTableRowsAndInsertPercentagesToCells=void 0;const n=r(26),T=r(610),o=r(297);t.getTableRowsAndInsertPercentagesToCells=(e,r,o,l)=>{e.forEach((e=>{const A=(0,t.getTargetedCellOrSvgText)(e,r,l);if(!A)return;const s=((0,n.cleanupStringToNumber)(A.innerHTML)/o*100).toFixed(2);(0,T.insertStringIntoCell)(A,s,l)}))};t.getTargetedCellOrSvgText=(e,t,r)=>r===o.TABLE_TYPE.STANDARD_REPORTING?e.children[t]:e.matches(`[column-index="${t}"]`)?e.querySelector("text"):null},610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.insertStringIntoCell=void 0;const n=r(297);t.insertStringIntoCell=(e,t,r)=>{if(r===n.TABLE_TYPE.STANDARD_REPORTING){const r=T(t);e.insertBefore(r,e.firstChild)}else{const r=o(e,t);e.insertAdjacentElement("afterend",r)}};const T=e=>{const t=document.createElement("span");return t.setAttribute("style","font-size:10px; font-style:italic"),t.setAttribute("class",n.CLASS_NAME_ALL_EXTENSION_CHANGES),t.innerText=`(${e}%)`,t},o=(e,t)=>{const r=e.getAttributeNS(null,"x"),T=e.getAttributeNS(null,"y");e.setAttributeNS(null,"dx","-30");const o=document.createElementNS("http://www.w3.org/2000/svg","text");return o.setAttributeNS(null,"x",r),o.setAttributeNS(null,"y",T),o.setAttributeNS(null,"style","font: 10px Roboto, sans-serif;"),o.setAttributeNS(null,"dx","13"),o.setAttributeNS(null,"dy","-5"),o.setAttributeNS(null,"class",`align-right ${n.CLASS_NAME_ALL_EXTENSION_CHANGES}`),o.textContent=`(${t}%)`,o}},697:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeCellPercentages=void 0;const n=r(297);t.removeCellPercentages=e=>{let t=0;return e.querySelectorAll(`.${n.CLASS_NAME_ALL_EXTENSION_CHANGES}`).forEach((e=>{e.remove(),t++})),t}}},t={};(function r(n){var T=t[n];if(void 0!==T)return T.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports})(144)})();